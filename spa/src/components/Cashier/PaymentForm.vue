<template>  <div class="payment-form">    <div class="payment-summary">      <h4>Payment for order #{{ order.id }}</h4>      <div class="summary-info">        <div class="summary-row">          <span>Subtotal:</span>          <span>{{ formatCurrency(order.subtotal || order.total) }}</span>        </div>        <div v-if="order.discount" class="summary-row">          <span>Discount:</span>          <span class="discount">-{{ formatCurrency(order.discount) }}</span>        </div>        <div class="summary-row total">          <span>Total:</span>          <span>{{ formatCurrency(order.total) }}</span>        </div>      </div>    </div>    <form @submit.prevent="processPayment">      <div class="form-group">        <label>Payment method</label>        <select v-model="paymentData.payment_method" class="form-select" required>          <option value="">Select method</option>          <option value="cash">Cash</option>          <option value="card">Card</option>          <option value="bank_transfer">Bank transfer</option>          <option value="e_wallet">E-wallet</option>        </select>      </div>      <div class="form-group">        <label>Amount received</label>        <input           v-model.number="paymentData.amount_received"           type="number"           class="form-input"          :min="order.total"          step="1000"          required          @input="calculateChange"        />      </div>      <div v-if="paymentData.amount_received >= order.total" class="change-amount">        <span>Change:</span>        <span class="change-value">{{ formatCurrency(changeAmount) }}</span>      </div>      <div class="form-group">        <label>Notes</label>        <textarea           v-model="paymentData.notes"           class="form-textarea"           rows="3"          placeholder="Payment notes..."        ></textarea>      </div>      <div class="form-actions">        <button type="button" class="btn btn-secondary" @click="$emit('cancel')">          Cancel        </button>        <button           type="submit"           class="btn btn-success"           :disabled="submitting || paymentData.amount_received < order.total"        >          <i class="fas fa-check"></i> Confirm payment        </button>      </div>    </form>  </div></template><script setup>import { ref, reactive, computed } from 'vue';import { useToast } from 'vue-toastification';import OrderService from '@/services/OrderService';const props = defineProps({  order: {    type: Object,    required: true  }});const emit = defineEmits(['payment-completed', 'cancel']);const toast = useToast();const paymentData = reactive({  payment_method: '',  amount_received: props.order.total,  notes: ''});const submitting = ref(false);const changeAmount = computed(() => {  if (paymentData.amount_received >= props.order.total) {    return paymentData.amount_received - props.order.total;  }  return 0;});function calculateChange() {}async function processPayment() {  if (paymentData.amount_received < props.order.total) {    toast.error('Amount received must be greater than or equal to total');    return;  }  submitting.value = true;  try {    await OrderService.updatePaymentStatus(      props.order.id,      'paid',      paymentData.payment_method    );    toast.success('Payment successful');    emit('payment-completed', {      ...props.order,      payment_status: 'paid',      payment_method: paymentData.payment_method    });  } catch (error) {    toast.error('Failed to process payment');  } finally {    submitting.value = false;  }}function formatCurrency(amount) {  return new Intl.NumberFormat('vi-VN', {    style: 'currency',    currency: 'VND'  }).format(amount);}</script><style scoped>.payment-form {  max-width: 100%;}.payment-summary {  background: #F8F9FA;  padding: 20px;  border-radius: 8px;  margin-bottom: 24px;}.payment-summary h4 {  font-size: 18px;  margin: 0 0 16px 0;  color: #333;}.summary-info {  background: white;  padding: 16px;  border-radius: 4px;}.summary-row {  display: flex;  justify-content: space-between;  margin-bottom: 8px;  font-size: 14px;}.summary-row.total {  font-size: 18px;  font-weight: 600;  color: #333;  margin-top: 12px;  padding-top: 12px;  border-top: 2px solid #E2E8F0;}.discount {  color: #28A745;}.form-group {  margin-bottom: 20px;}.form-group label {  display: block;  margin-bottom: 6px;  font-weight: 500;  color: #333;}.form-select,.form-input,.form-textarea {  width: 100%;  padding: 10px 12px;  border: 1px solid #E2E8F0;  border-radius: 4px;  font-size: 14px;}.change-amount {  display: flex;  justify-content: space-between;  padding: 12px;  background: #D4EDDA;  border-radius: 4px;  margin-bottom: 20px;  font-size: 16px;  font-weight: 600;  color: #155724;}.change-value {  font-size: 18px;}.form-actions {  display: flex;  justify-content: flex-end;  gap: 12px;  margin-top: 24px;}.btn {  padding: 10px 20px;  border: none;  border-radius: 4px;  cursor: pointer;  font-size: 14px;  transition: all 0.3s;}.btn-success {  background: #28A745;  color: white;}.btn-success:hover:not(:disabled) {  background: #218838;}.btn-success:disabled {  opacity: 0.6;  cursor: not-allowed;}.btn-secondary {  background: #6C757D;  color: white;}.btn-secondary:hover {  background: #5A6268;}</style>