const Utils = require('../Utils');const REQUIRED_FIELDS = ['people', 'date', 'time', 'branch_name'];class BookingValidator {    static validate(rawEntities = {}) {        const entities = Utils.normalizeEntityFields(rawEntities || {});        const normalized = {            people: entities.people || entities.number_of_people || entities.guest_count || null,            date: entities.date || entities.reservation_date || entities.booking_date || null,            time: entities.time || entities.reservation_time || entities.time_slot || null,            branch_id: entities.branch_id || null,            branch_name: entities.branch_name || entities.branch || null,            district_id: entities.district_id || null,        };        const missing = REQUIRED_FIELDS.filter((field) => !normalized[field]);        if (missing.length > 0) {            return {                status: 'ask_missing',                missing,                entities: normalized,            };        }        return {            status: 'ready',            entities: normalized,        };    }    static buildMissingInfoPrompt(missing = [], entities = {}) {        const normalized = Utils.normalizeEntityFields(entities || {});        const labels = {            people: 'üë• S·ªë ng∆∞·ªùi',            date: 'üìÖ Ng√†y',            time: 'üïê Gi·ªù',            branch_name: 'üìç Chi nh√°nh',        };        const valueLabels = {            people: (val) => `üë• S·ªë ng∆∞·ªùi: ${val}`,            date: (val) => `üìÖ Ng√†y: ${val}`,            time: (val) => `üïê Gi·ªù: ${val}`,            branch_name: (val) => `üìç Chi nh√°nh: ${val}`,        };        const provided = [];        if (normalized.people || normalized.number_of_people || normalized.guest_count) {            provided.push(valueLabels.people(normalized.people || normalized.number_of_people || normalized.guest_count));        }        if (normalized.date || normalized.reservation_date || normalized.booking_date) {            provided.push(valueLabels.date(normalized.date || normalized.reservation_date || normalized.booking_date));        }        if (normalized.time || normalized.reservation_time || normalized.time_slot) {            provided.push(valueLabels.time(normalized.time || normalized.reservation_time || normalized.time_slot));        }        if (normalized.branch_name || normalized.branch) {            provided.push(valueLabels.branch_name(normalized.branch_name || normalized.branch));        }        const mapped = missing.map((field) => labels[field] || field);        let message = 'T√¥i c·∫ßn th√™m th√¥ng tin ƒë·ªÉ ƒë·∫∑t b√†n:\n\n';        if (provided.length > 0) {            message += `‚úÖ ƒê√£ c√≥:\n${provided.join('\n')}\n\n`;        }        if (mapped.length > 0) {            message += `‚ùå Thi·∫øu: ${mapped.join(', ')}\n\nVui l√≤ng b·ªï sung gi√∫p t√¥i nh√©.`;        } else {            message += 'Vui l√≤ng b·ªï sung th√¥ng tin c√≤n thi·∫øu.';        }        return message;    }}module.exports = BookingValidator;